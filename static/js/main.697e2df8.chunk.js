(this.webpackJsonpblackjack2=this.webpackJsonpblackjack2||[]).push([[0],{15:function(e,t,s){},16:function(e,t,s){},18:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),r=s(9),n=s.n(r),i=(s(15),s(4)),u=s(10),l=s(2),o=(s(16),s(6)),d=s(7),j=function(){function e(t,s,a){Object(o.a)(this,e),this.props={key:a,playerName:t,cards:[],type:s,statusMessage:"0",status:"P",currentPlayer:!1}}return Object(d.a)(e,[{key:"key",get:function(){return this.props.key}},{key:"cards",get:function(){return this.props.cards}},{key:"score",get:function(){for(var e=0,t=0,s=0;s<this.cards.length;s++){var a=0;switch(this.cards[s].value){case"A":a=11,t++;break;case"J":case"Q":case"K":a=10;break;default:a=parseInt(this.cards[s].value)}e+=a}if(e>21)for(;e>21&&t>0;)e-=10,t--;return e}},{key:"playerName",get:function(){return this.props.playerName}},{key:"type",get:function(){return this.props.type}},{key:"status",get:function(){return this.props.status},set:function(e){this.props.status=e}},{key:"statusMessage",get:function(){return this.props.statusMessage},set:function(e){this.props.statusMessage=e}},{key:"currentPlayer",get:function(){return this.props.currentPlayer},set:function(e){this.props.currentPlayer=e}},{key:"hit",value:function(e){this.cards.push(e),this.statusMessage=this.determineStatusMessage()}},{key:"stand",value:function(){this.statusMessage="STAND",this.status="S"}},{key:"determineStatusMessage",value:function(){var e,t=this.score;return t>21?(e="LOSE! You bust.",this.status="L"):21===t?(e="WIN",this.status="W"):t<21&&this.cards.length>=5?(e="WIN! You have 5 cards and less than 21 score",this.status="W"):(e="0",this.status="P"),e}}]),e}(),h=s(0);function b(e){var t=Object(a.useState)(e.suit),s=Object(l.a)(t,2),c=s[0],r=s[1],n=Object(a.useState)(e.value),i=Object(l.a)(n,2),u=i[0],o=i[1];return Object(a.useEffect)((function(){e.suit!==c&&r(e.suit)}),[e.suit]),Object(a.useEffect)((function(){e.value!==u&&o(e.value)}),[e.value]),Object(h.jsx)("div",{className:c&&u?"\u2665"===c||"\u2666"===c?"card color-red":"card color-black":"card card-flipped",children:Object(h.jsx)("table",{className:"card-main-container",children:Object(h.jsxs)("tbody",{children:[Object(h.jsx)("tr",{className:"card-top",children:Object(h.jsx)("td",{children:u})}),Object(h.jsx)("tr",{className:"card-middle",children:Object(h.jsx)("td",{children:c})}),Object(h.jsx)("tr",{className:"card-bottom",children:Object(h.jsx)("td",{children:u})})]})})})}var f=function(){function e(){Object(o.a)(this,e),this.cards=this.generateDeck(),this.shuffle()}return Object(d.a)(e,[{key:"shuffle",value:function(){for(var e=this.cards.length-1;e>0;e--){var t=Math.floor(Math.random()*(e+1)),s=this.cards[t];this.cards[t]=this.cards[e],this.cards[e]=s}}},{key:"generateDeck",value:function(){var e=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];return["\u2660","\u2663","\u2665","\u2666"].flatMap((function(t){return e.map((function(e){return{suit:t,value:e}}))}))}}]),e}();function p(e){return Object(h.jsx)("header",{className:"App-header",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{className:"menu-btn",onClick:e.onMenuClick,children:"Main menu"}),Object(h.jsx)("button",{className:"menu-btn",onClick:function(){return e.onClick(e.players)},children:"New Round"})]})})}function y(e){var t=Object(a.useState)((function(){return e.players?e.players.map((function(e){return e.playerName})):[]})),s=Object(l.a)(t,2),r=s[0],n=s[1],u=Object(a.useState)(""),o=Object(l.a)(u,2),d=o[0],j=o[1],b=c.a.createRef();function f(e){var t=Object(i.a)(r);t.push(e),n(t),j("")}return Object(a.useEffect)((function(){b.current.focus()}),[d]),Object(h.jsxs)("div",{children:[Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsx)("h1",{className:"heading",children:"Blackjack"}),Object(h.jsx)("h2",{className:"sub-heading",children:"by Mehraan Ahmed Khan"})]}),Object(h.jsx)("body",{children:Object(h.jsx)("table",{className:"main-menu",children:Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[" ",Object(h.jsx)("button",{className:"start-btn",onClick:function(){return e.onNewGame(r)},disabled:0===r.length,children:"Start Game"})]}),Object(h.jsx)("tr",{children:Object(h.jsxs)("td",{children:[Object(h.jsx)("div",{className:"add-player",children:Object(h.jsxs)("form",{onSubmit:function(){return f(d)},children:[Object(h.jsx)("input",{placeholder:"New player name",onChange:function(e){j(e.target.value)},className:"player-input",value:d,ref:b}),Object(h.jsx)("button",{className:"add-btn",onClick:function(){return f(d)},disabled:!d,children:"Add"})]})}),Object(h.jsx)("h6",{className:"list-heading",children:"Players"}),Object(h.jsx)("ol",{className:"player-list",children:0===r.length?Object(h.jsx)("div",{style:{textAlign:"center"},children:"Please add a player"}):r.map((function(e,t){return Object(h.jsxs)("li",{children:[e,Object(h.jsx)("button",{className:"remove-btn",onClick:function(){!function(e){var t=r.filter((function(t,s){if(s!==e)return t})).map((function(e){return e}));n(t)}(t)},children:"X"})]})}))})]})})]})})})]})}function O(e){var t=Object(a.useState)(e.players),s=Object(l.a)(t,2),c=s[0],r=s[1];Object(a.useEffect)((function(){e.players!==c&&(r(e.players),e.players.forEach((function(e){e.currentPlayer&&document.getElementById("player-block-".concat(e.key)).scrollIntoView({behavior:"smooth"})})))}),[e.players]);var n=c.map((function(t,s){var a="";return"W"===t.status?a="color-green":"S"===t.status?a="color-yellow":"L"===t.status&&(a="color-red"),Object(h.jsxs)("div",{id:"player-block-".concat(t.key),className:"player-block",children:[Object(h.jsxs)("div",{className:t.currentPlayer?"hand current-player":"hand",children:["D"===t.type?Object(h.jsxs)("div",{className:"player-label",children:[t.playerName,t.currentPlayer?" - ".concat(t.score):null]}):Object(h.jsxs)("div",{className:"player-label ".concat(a),children:[t.playerName," - ",t.score," -"," ","0"===t.statusMessage?"Playing":t.statusMessage]}),Object(h.jsx)("div",{className:"card-container",children:t.cards.map((function(e,s){return"D"!==t.type||t.currentPlayer||1!==s?Object(h.jsx)(b,{suit:e.suit,value:e.value}):Object(h.jsx)(b,{})}))})]}),Object(h.jsxs)("div",{className:"D"===t.type?"hidden":"",children:[Object(h.jsx)("button",{className:"hit-btn",onClick:function(){e.onHitMe(t)},disabled:!t.currentPlayer||"P"!==t.type,children:"Hit me!"}),Object(h.jsx)("button",{className:"stand-btn",onClick:function(){e.onStand(t)},disabled:!t.currentPlayer||"P"!==t.type,children:"Stand"})]})]})})),i=[],u=[];return n.forEach((function(e,t){i.push(Object(h.jsx)("td",{className:"col-2",children:e})),(t+1)%2!==0&&t!==n.length-1||(u.push(Object(h.jsx)("tr",{className:"player-row",children:i})),i=[])})),u}function m(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),s=t[0],c=t[1],r=Object(a.useState)(""),n=Object(l.a)(r,2),o=n[0],d=n[1],b=Object(a.useState)("MENU"),m=Object(l.a)(b,2),v=m[0],x=m[1],N=Object(a.useState)(""),k=Object(l.a)(N,2),g=k[0],M=k[1];function P(){var e=Object(u.a)({},g),t=e.cards.pop();return M(e),t}function S(e){for(var t=new f,s=e.map((function(e,t){return new j(e,"P",t)})),a=new j("Dealer","D",-1),r=0;r<2;r++)s.forEach((function(e){t.cards.length<5&&(t=C(t)),e.hit(t.cards.pop())})),a.hit(t.cards.pop());if(s[0].currentPlayer=!0,"W"===s[0].status){var n=A(s[0].key+1,s,a);s=n.players,a=n.dealer}c(s),d(a),x("NEW GAME"),M(t)}function E(e){if(e.hit(P()),"0"!==e.statusMessage){var t=A(e.key+1,s,o);c(t.players),d(t.dealer)}}function w(e){e.stand();var t=A(e.key+1,s,o);c(t.players),d(t.dealer)}function A(e,t,s){var a=Object(i.a)(t),c=s;if(e===a.length)a.forEach((function(e){e.currentPlayer=!1})),c.currentPlayer=!0;else for(var r=0;r<a.length;r++)if(a[r].key===e){if("W"===a[r].status){A(e+1,a,c);break}a[r].currentPlayer=!0}else a[r].currentPlayer=!1;return{players:a,dealer:c}}function C(e){var t=new f;return e.cards.forEach((function(e){t.cards.push(e)})),t}return Object(a.useEffect)((function(){o.currentPlayer&&function(){var e=o;if(0!==s.filter((function(e){return"STAND"===e.statusMessage})).map((function(e){return e})).length){for(;e.score<17;)o.hit(P());var t=Object(i.a)(s);t.forEach((function(t){"STAND"===t.statusMessage&&(e.score>21?(t.statusMessage="WIN! Dealer bust",t.status="W"):t.score>=e.score?(t.statusMessage="WIN! You beat the dealer",t.status="W"):(t.statusMessage="Lose! The dealer has a higher score",t.status="L"))})),c(t),d(e)}}()}),[o.currentPlayer]),Object(a.useEffect)((function(){g&&g.cards.length<5&&M(C(g))}),[g]),Object(h.jsx)("div",{className:"App",children:"MENU"===v?Object(h.jsx)(y,{onNewGame:S,players:s}):Object(h.jsxs)("div",{children:[Object(h.jsx)(p,{onClick:S,onMenuClick:function(){x("MENU")},players:s.map((function(e){return e.playerName}))}),Object(h.jsx)("div",{className:"App-body",children:Object(h.jsx)("table",{children:Object(h.jsxs)("tbody",{children:[Object(h.jsx)(O,{players:[o],onHitMe:E,onStand:w}),Object(h.jsx)(O,{players:s,onHitMe:E,onStand:w})]})})})]})})}n.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(m,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.697e2df8.chunk.js.map