(this.webpackJsonpblackjack2=this.webpackJsonpblackjack2||[]).push([[0],{15:function(e,t,s){},16:function(e,t,s){},18:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),n=s(7),r=s.n(n),i=(s(15),s(10)),u=s(8),l=s(9),o=s(5),d=s(2),h=(s(16),s(0));function j(e){return Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsx)("h1",{className:"heading game",children:"Blackjack"}),Object(h.jsx)("h2",{className:"sub-heading game",children:"By Mehraan Ahmed Khan"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{className:"menu-btn",onClick:e.onMenuClick,children:"Main menu"}),Object(h.jsx)("button",{className:"menu-btn",onClick:function(){return e.onClick(e.players)},children:"New Round"})]})]})}function b(e){var t=Object(a.useState)(["Billy","Lemmy","Andrew","Carla"]),s=Object(d.a)(t,2),n=s[0],r=s[1],i=Object(a.useState)(""),u=Object(d.a)(i,2),l=u[0],j=u[1],b=c.a.createRef();function f(e){var t=Object(o.a)(n);t.push(e),r(t),j("")}return Object(a.useEffect)((function(){b.current.focus()}),[l]),Object(h.jsxs)("div",{children:[Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsx)("h1",{className:"heading",children:"Blackjack"}),Object(h.jsx)("h2",{className:"sub-heading",children:"By Mehraan Ahmed Khan"}),Object(h.jsx)("button",{className:"start-btn",onClick:function(){return e.onNewGame(n)},disabled:0===n.length,children:"Start Game"})]}),Object(h.jsx)("body",{children:Object(h.jsx)("table",{className:"main-menu",children:Object(h.jsx)("tbody",{children:Object(h.jsx)("tr",{children:Object(h.jsxs)("td",{children:[Object(h.jsx)("div",{className:"add-player",children:Object(h.jsxs)("form",{onsubmit:function(){return f(l)},children:[Object(h.jsx)("input",{placeholder:"New player name",onChange:function(e){j(e.target.value)},className:"player-input",value:l,ref:b}),Object(h.jsx)("button",{className:"add-btn",onClick:function(){return f(l)},disabled:!l,children:"Add"})]})}),Object(h.jsx)("h6",{className:"list-heading",children:"Players"}),Object(h.jsx)("ol",{className:"player-list",children:n.map((function(e,t){return Object(h.jsxs)("li",{children:[e,Object(h.jsx)("button",{className:"remove-btn",onClick:function(){!function(e){var t=n.filter((function(t,s){if(s!==e)return t})).map((function(e){return e}));r(t)}(t)},children:"X"})]})}))})]})})})})})]})}function f(){var e=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];return["\u2660","\u2663","\u2665","\u2666"].flatMap((function(t){return e.map((function(e){return{suit:t,value:e}}))}))}function p(e){var t=Object(a.useState)(e.suit),s=Object(d.a)(t,2),c=s[0],n=s[1],r=Object(a.useState)(e.value),i=Object(d.a)(r,2),u=i[0],l=i[1];return Object(a.useEffect)((function(){e.suit!==c&&n(e.suit)}),[e.suit]),Object(a.useEffect)((function(){e.value!==u&&l(e.value)}),[e.value]),Object(h.jsx)("div",{className:c&&u?"\u2665"===c||"\u2666"===c?"card card-red":"card card-black":"card card-flipped",children:Object(h.jsx)("table",{className:"card-main-container",children:Object(h.jsxs)("tbody",{children:[Object(h.jsx)("tr",{className:"card-top",children:Object(h.jsx)("td",{children:u})}),Object(h.jsx)("tr",{className:"card-middle",children:Object(h.jsx)("td",{children:c})}),Object(h.jsx)("tr",{className:"card-bottom",children:Object(h.jsx)("td",{children:u})})]})})})}function O(e){var t=Object(a.useState)(e.players),s=Object(d.a)(t,2),c=s[0],n=s[1];Object(a.useEffect)((function(){e.players!==c&&(n(e.players),e.players.forEach((function(e){e.currentPlayer&&document.getElementById("player-block-".concat(e.id)).scrollIntoView({behavior:"smooth"})})))}),[e.players]);var r=c.map((function(t,s){var a="";return"W"===t.status?a="color-green":"S"===t.status?a="color-yellow":"L"===t.status&&(a="color-red"),Object(h.jsxs)("div",{id:"player-block-".concat(t.id),className:"player-block",children:[Object(h.jsxs)("div",{className:t.currentPlayer?"hand current-player":"hand",children:["D"===t.type?Object(h.jsxs)("div",{className:"player-label",children:[t.playerName,t.currentPlayer?" - ".concat(t.score):null]}):Object(h.jsxs)("div",{className:"player-label ".concat(a),children:[t.playerName," - ",t.score," -"," ","0"===t.statusMessage?"Playing":t.statusMessage]}),Object(h.jsx)("div",{className:"card-container",children:t.cards.map((function(e,s){return"D"!==t.type||t.currentPlayer||1!==s?Object(h.jsx)(p,{suit:e.suit,value:e.value}):Object(h.jsx)(p,{})}))})]}),Object(h.jsxs)("div",{className:t.currentPlayer&&"P"===t.type?"":"hidden",children:[Object(h.jsx)("button",{onClick:function(){e.onHitMe(t)},children:"Hit me!"}),Object(h.jsx)("button",{onClick:function(){e.onStand(t)},children:"Stand"})]})]})})),i=[],u=[];return r.forEach((function(e,t){i.push(Object(h.jsx)("td",{className:"col-2",children:e})),(t+1)%2!==0&&t!==r.length-1||(u.push(Object(h.jsx)("tr",{className:"player-row",children:i})),i=[])})),u}var y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f();Object(u.a)(this,e),this.cards=t}return Object(l.a)(e,[{key:"size",get:function(){return this.cards.length}},{key:"shuffle",value:function(){for(var e=this.size-1;e>0;e--){var t=Math.floor(Math.random()*(e+1)),s=this.cards[t];this.cards[t]=this.cards[e],this.cards[e]=s}}}]),e}(),m=function(){function e(t,s,a){Object(u.a)(this,e),this.props={id:a,playerName:t,cards:[],type:s,statusMessage:"0",status:"P",currentPlayer:!1}}return Object(l.a)(e,[{key:"id",get:function(){return this.props.id}},{key:"cards",get:function(){return this.props.cards}},{key:"cardsStr",get:function(){for(var e="",t=0;t<this.cards.length;t++)e+="".concat(this.cards[t].value," of ").concat(this.cards[t].suit," | ");return e}},{key:"score",get:function(){for(var e=0,t=0,s=0;s<this.cards.length;s++){var a=0;switch(this.cards[s].value){case"A":a=11,t++;break;case"J":case"Q":case"K":a=10;break;default:a=parseInt(this.cards[s].value)}e+=a}if(e>21)for(;e>21&&t>0;)e-=10,t--;return e}},{key:"playerName",get:function(){return this.props.playerName}},{key:"type",get:function(){return this.props.type}},{key:"status",get:function(){return this.props.status},set:function(e){this.props.status=e}},{key:"statusMessage",get:function(){return this.props.statusMessage},set:function(e){this.props.statusMessage=e}},{key:"currentPlayer",get:function(){return this.props.currentPlayer},set:function(e){this.props.currentPlayer=e}},{key:"hit",value:function(e){this.cards.push(e),this.statusMessage=this.determineStatusMessage()}},{key:"stand",value:function(){this.statusMessage="STAND",this.status="S"}},{key:"determineStatusMessage",value:function(){var e,t=this.score;return t>21?(e="LOSE! You bust.",this.status="L"):21===t?(e="WIN",this.status="W"):t<21&&this.cards.length>=5?(e="WIN! You have 5 cards and less than 21 score",this.status="W"):(e="0",this.status="P"),e}}]),e}();function v(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),s=t[0],c=t[1],n=Object(a.useState)(""),r=Object(d.a)(n,2),u=r[0],l=r[1],f=Object(a.useState)("MENU"),p=Object(d.a)(f,2),v=p[0],g=p[1],x=Object(a.useState)(""),N=Object(d.a)(x,2),k=N[0],M=N[1];function P(){var e,t=Object(i.a)({},k);return e=t.cards.pop(),M(t),e}function S(e){var t=new y;t.shuffle();var a=[];e?a=e.map((function(e,t){return new m(e,"P",t)})):a=s.map((function(e){return e.playerName})).map((function(e,t){return new m(e,"P",t)}));for(var n=new m("Dealer","D",-1),r=0;r<2;r++)a.forEach((function(e){e.hit(t.cards.pop())})),n.hit(t.cards.pop());if(a[0].currentPlayer=!0,"W"===a[0].status){console.log("changing player",a[0].status,a[0]);var i=w(a[0].id+1,a,n);a=i.players,n=i.dealer}c(a),l(n),g("NEW GAME"),M(t)}function E(e){if(e.hit(P()),"0"!==e.statusMessage){var t=w(e.id+1,s,u);c(t.players),l(t.dealer)}}function C(e){e.stand();var t=w(e.id+1,s,u);c(t.players),l(t.dealer)}function w(e,t,s){var a=Object(o.a)(t),c=s;if(e===a.length)a.forEach((function(e){e.currentPlayer=!1})),c.currentPlayer=!0;else for(var n=0;n<a.length;n++)if(a[n].id===e){if("W"===a[n].status){w(e+1,a,c);break}a[n].currentPlayer=!0}else a[n].currentPlayer=!1;return{players:a,dealer:c}}return Object(a.useEffect)((function(){u.currentPlayer&&function(){var e=u;if(0!==s.filter((function(e){return"STAND"===e.statusMessage})).map((function(e){return e})).length){for(;e.score<17;)u.hit(P());var t=Object(o.a)(s);t.forEach((function(t){"STAND"===t.statusMessage&&(e.score>21?(t.statusMessage="WIN! Dealer bust",t.status="W"):t.score>=e.score?(t.statusMessage="WIN! You beat the dealer",t.status="W"):(t.statusMessage="Lose! The dealer has a higher score",t.status="L"))})),c(t),l(e)}}()}),[u.currentPlayer]),Object(h.jsx)("div",{className:"App",children:"MENU"===v?Object(h.jsx)(b,{onNewGame:S}):Object(h.jsxs)("div",{children:[Object(h.jsx)(j,{onClick:S,onMenuClick:function(){g("MENU")},players:s.map((function(e){return e.playerName}))}),Object(h.jsx)("div",{className:"App-body",children:Object(h.jsx)("table",{children:Object(h.jsxs)("tbody",{children:[Object(h.jsx)(O,{players:[u],onHitMe:E,onStand:C}),Object(h.jsx)(O,{players:s,onHitMe:E,onStand:C})]})})})]})})}var g=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,19)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),a(e),c(e),n(e),r(e)}))};r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root")),g()}},[[18,1,2]]]);
//# sourceMappingURL=main.774de6df.chunk.js.map